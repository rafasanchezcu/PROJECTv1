function setTimelineWidth(e,t){return totalWidth=150*t.length+200,e.children(".line").children(".linei").css("width",totalWidth+"px"),totalWidth}function maxValue(e){for(var t=0,n=0;n<e.length;n++)t<e[n].distancia&&(t=e[n].distancia);return t}function setPosTimeline(e,t,n,i){disNormal=Math.round((t+100)/n*(i-100)),console.log(disNormal),e.css("left",disNormal+"px")}function updateSlide(e,t,n){var i=e.children(".line"),l=i.children(".linei"),a=getTranslateValue(l),r=Number(i.css("width").replace("px",""));"next"==n?translateTimeline(e,a-r,r-t):translateTimeline(e,a+r)}function getTranslateValue(e){var t=window.getComputedStyle(e.get(0),null),n=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");if(n.indexOf("(")>=0){var n=n.split("(")[1];n=n.split(")")[0],n=n.split(",");var i=n[4]}else var i=0;return Number(i)}function translateTimeline(e,t,n){var i=e.children(".line").children(".linei").get(0),l=e.find(".mover");console.log(i),t=t>0?0:t,t="undefined"!=typeof n&&n>t?n:t,setTransformValue(i,"translateX",t+"px"),0==t?l.find(".prev").addClass("inactive"):l.find(".prev").removeClass("inactive"),t==n?l.find(".next").addClass("inactive"):l.find(".next").removeClass("inactive")}function setTransformValue(e,t,n){e.style["-webkit-transform"]=t+"("+n+")",e.style["-moz-transform"]=t+"("+n+")",e.style["-ms-transform"]=t+"("+n+")",e.style["-o-transform"]=t+"("+n+")",e.style.transform=t+"("+n+")"}$.getJSON("http://localhost:8008/data/rutasd.json").success(function(e){$.rutas=e,jQuery(document).ready(function(t){for(var n=t(".timeline"),i=n.children(".line").children(".linei"),l=0;l<e.length;l++){var a=document.createElement("li");a.innerHTML=e[l].Nombre,i[0].appendChild(a)}var r=i.find("li");timelineWidth=setTimelineWidth(n,e);var s=maxValue(e);for(l=0;l<r.length;l++)setPosTimeline(r.eq(l),e[l].distancia,s,timelineWidth);n.find(".mover").on("click",".next",function(e){e.preventDefault(),updateSlide(n,timelineWidth,"next")}),n.find(".mover").on("click",".prev",function(e){e.preventDefault(),updateSlide(n,timelineWidth,"prev")}),n.addClass("loaded"),t.getJSON("http://localhost:8001/data/bus.json").success(function(e){t.bus=e;var n=document.createElement("li");n.innerHTML=e[0].Nombre,i[0].appendChild(n),b=0,setInterval(function(){b<e[0].distancia.length?(console.log(e[0].distancia[b]),setPosTimeline(i.find("li").eq(-1),e[0].distancia[b],s,timelineWidth),b++):b=0},1e3)})})});