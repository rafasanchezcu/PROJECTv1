function initMap(){function e(e,t){var o=new google.maps.InfoWindow({content:e});google.maps.event.addListener(t,"click",function(){o.open(h,t)})}function o(e,t){T.setContent(e),google.maps.event.addListener(t,"click",function(){T.open(h,t)})}function i(t){for(var o=0;o<t.length;o++)e(t[o].Nombre,b(t[o].latitud,t[o].longitud))}function n(e){var t=e.getPosition();infoWindow1.setContent(['"latitud":',t.lat(),',"longitud":',t.lng(),""].join("")),infoWindow1.open(h,e)}function a(){$.getJSON("http://localhost:8001/data/ruta2.json",function(e){$.coordenadas=e,s(e.info[0],w),s(e.info[1],I)})}function s(e,i){switch(e.HoraS){case 0:if(C<e.coordenadas.length){var n=-e.coordenadas[C].id+4;t=C-10*(e.coordenadas[C].id-1)+1,chart.series[n].data[1].update(t),k(e.coordenadas[C].latitud,e.coordenadas[C].longitud,i),o("<p>latitud: "+e.coordenadas[C].latitud+"<br>lontitud: "+e.coordenadas[C].longitud+"<br>id: "+e.coordenadas[C].id+"<br>Hora salida: "+e.HoraS+"</p>",i)}else{C=0;for(var a=0;a<chart.series.length;a++)chart.series[a].data[1].update(C)}C++;break;case 20:if(M<e.coordenadas.length&&M>=0){var n=-e.coordenadas[M].id+4;t=M-10*(e.coordenadas[M].id-1)+1,console.log(M),chart.series[n].data[2].update(t),k(e.coordenadas[M].latitud,e.coordenadas[M].longitud,i),o("<p>latitud: "+e.coordenadas[M].latitud+"<br>lontitud: "+e.coordenadas[M].longitud+"<br>id: "+e.coordenadas[M].id+"<br>Hora salida: "+e.HoraS+"</p>",i)}else if(0>=M)M++;else{M=0;for(var a=0;a<chart.series.length;a++)chart.series[a].data[2].update(M)}M++}}function l(e,t){var o=document.getElementById("map-zoom-in"),i=document.getElementById("map-zoom-out");e.appendChild(o),e.appendChild(i),google.maps.event.addDomListener(o,"click",function(){t.setZoom(t.getZoom()+1)}),google.maps.event.addDomListener(i,"click",function(){t.setZoom(t.getZoom()-1)})}var r=7.09,d=-73.11,g=13,p="img/busnaranja.svg",u="img/busestacionazul.svg",y="#2d313f",m=-20,c=5,f=[{elementType:"labels",stylers:[{saturation:m}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"poi.government",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"poi.sport_complex",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"poi.attraction",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"poi.business",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"transit",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"transit.station",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"landscape",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"road",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]},{featureType:"water",elementType:"geometry",stylers:[{hue:y},{visibility:"on"},{lightness:c},{saturation:m}]}],v={center:new google.maps.LatLng(r,d),zoom:g,panControl:!1,zoomControl:!1,mapTypeControl:!1,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:f},h=new google.maps.Map(document.getElementById("map"),v),b=function(e,t){var o=new google.maps.Marker({position:new google.maps.LatLng(e,t),map:h,visible:!0,icon:u,zIndex:2});return o},T=new google.maps.InfoWindow({content:null});$.getJSON("http://localhost:8001/data/coordenadas.json",function(e){$.coordenadas=e,i(e)});var w=new google.maps.Marker({position:null,map:h,visible:!0,icon:p}),I=new google.maps.Marker({position:null,map:h,visible:!0,icon:p}),k=function(e,t,o){var i=new google.maps.LatLng(e,t);o.setPosition(i)};infoWindow1=new google.maps.InfoWindow;var L=new google.maps.Marker({position:new google.maps.LatLng(7.071729,-73.107195),map:h,draggable:!0,visible:!0});google.maps.event.addListener(L,"click",function(){n(L)}),timer=setInterval(a,1e3);{var C=0,M=-20,z=$("#lista").change(function(){switch(clearInterval(timer),z.val()){case"1":timer=setInterval(a,200);break;case"2":timer=setInterval(a,1e3);break;case"3":timer=setInterval(a,5e3);break;default:timer=setInterval(a,1e3)}}),H=document.createElement("div");new l(H,h)}h.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(H),google.maps.event.addDomListener(window,"resize",function(){var e=h.getCenter();google.maps.event.trigger(h,"resize"),h.setCenter(e)})}